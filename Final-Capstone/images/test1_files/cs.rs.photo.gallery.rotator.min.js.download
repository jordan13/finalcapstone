!function($){$.fn.creativeGalleryRotate=function(settings){var config={efficientLoad:"yes",imageWidth:960,imageHeight:405,appHeader:"no",titles:"no",captions:"no",showTextPerPhoto:"no",playPause:"no",mainControls:"no",galleryOverlay:"no",linkedElement:["image"],contMoreLink:"no",contMoreLinkText:"Read More",descMoreLink:"no",descMoreLinkText:"Read More",photoMoreLink:"no",photoMoreLinkText:"Read More",bullets:"no",bulletControls:"no",thumbnails:"no",thumbnailWidth:122,thumbnailHeight:52,thumbnailSlideDirection:"horizontal",hoverPause:"yes",fullScreenRotator:"no",fullScreenBreakpoints:["960","768","640","480","320"],autoRotate:"yes",transitionType:"fade",transitionSpeed:2,onImageLoad:function(){},allImagesLoaded:function(){},onThumbnailLoad:function(){},allThumbnailsLoaded:function(){},onTransitionStart:function(){},onTransitionEnd:function(){},allLoaded:function(){}};return settings&&$.extend(config,settings),this.each(function(){function gatherMedia(){var e="";if("fade"==config.transitionType)for(var t=0;recordNum>t;t++){var l=0==t?" first active":"";if(recordNum>1)var a=1==t?" next":"",o="yes"==config.efficientLoad&&2==t?" next-load":"",i=t==recordNum-1?" last prev":"";else var a="",i="",o="";var s=myJSON.Album.Images[t].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="image loading hidden'+l+a+i+o+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[t].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[t].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[t].target+"</span>",e+='<div class="loader">Loading</div>',e+=textPerPhoto(h),e+="</li>"}else if("slide"==config.transitionType)if(1==recordNum)for(var n=myJSON.Album.Images[0].src.split("?"),m=myJSON.Album.lgpath+n[0],t=0;3>t;t++){var g=1==t?"image loading active":"image loading";e+='<li class="'+g+'">',e+='<span class="record-src hidden">'+m+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[0].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[0].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[0].target+"</span>",e+='<div class="loader">Loading</div>',e+=textPerPhoto(0),e+="</li>"}else if(2==recordNum)for(var t=0,h=1;4>t;t++){var g=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[h].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+g+'" index="'+h+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[h].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[h].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[h].target+"</span>",e+=textPerPhoto(h),e+="</li>",1==h?h=0:h++}else if(3==recordNum)for(var t=0,h=2;6>t;t++){var g=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[h].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+g+'" index="'+h+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[h].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[h].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[h].target+"</span>",e+=textPerPhoto(h),e+="</li>",2==h?h=0:h++}else for(var t=0,h=recordNum-1;recordNum>t;t++){var g=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[h].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+g+'" index="'+h+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[h].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[h].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[h].target+"</span>",e+=textPerPhoto(h),e+="</li>",h==recordNum-1?h=0:h++}buildStructure(e)}function buildStructure(e){var t="";if(t='<div class="ui-widget-detail">',t+='   <div class="rs-photo-gallery-container" id="rs-photo-gallery-container-'+elemID+'">',t+='   <div class="rs-photo-gallery-images">',t+='       <ul class="rs-photo-gallery-images-list">'+e+"</ul>",t+="   </div>","yes"==config.thumbnails&&recordNum>1){for(var l="",a=0;recordNum>a;a++){var o=0==a?" first active":"";if(recordNum>1)var i=1==a?" next":"",s=a==recordNum-1?" last prev":"";else var i="",s="";var r=myJSON.Album.Images[a].src.split("?"),n=myJSON.Album.lgpath+r[0];l+='<li class="rs-photo-gallery-thumbnail thumbnail-image loading hidden'+o+i+s+'" role="button" tabindex="0" aria-label="Navigate to Slide '+(a+1)+'">',l+='<span class="thumbnail-src hidden">'+n+"</span>",l+='<span class="thumbnail-title hidden">'+myJSON.Album.Images[a].photoname+"</span>",l+="</li>"}t+='<div class="rs-photo-gallery-thumbnails-outer">',t+='<div class="rs-photo-gallery-thumb-control back hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Backward"></div>',t+='<div class="rs-photo-gallery-thumbnails">',t+='<ul class="rs-photo-gallery-thumbnail-list">'+l+"</ul>",t+="</div>",t+='<div class="rs-photo-gallery-thumb-control next hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Forward"></div>',t+="</div>"}if("yes"==config.bullets&&recordNum>1){t+='<div class="rs-photo-gallery-bullets-outer">',t+='	<div class="rs-photo-gallery-bullets ui-clear">',"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>');for(var m=1;recordNum>=m;m++)t+=1==m?'<div class="rs-photo-gallery-bullet active first" role="button" tabindex="0" aria-label="Navigate to Slide '+m+'"></div>':2==m&&m==recordNum?'<div class="rs-photo-gallery-bullet next prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+m+'"></div>':2==m?'<div class="rs-photo-gallery-bullet next" role="button" tabindex="0" aria-label="Navigate to Slide '+m+'"></div>':m==recordNum?'<div class="rs-photo-gallery-bullet prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+m+'"></div>':'<div class="rs-photo-gallery-bullet" role="button" tabindex="0" aria-label="Navigate to Slide '+m+'"></div>';"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),t+="</div>",t+="</div>"}("yes"==config.titles||"yes"==config.captions)&&("yes"==config.titles&&"no"==config.captions?t+="hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':"no"==config.titles&&"yes"==config.captions?t+="hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':"yes"==config.titles&&"yes"==config.captions&&(t+="hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">'),"yes"==config.titles&&(t+='<div class="rs-photo-gallery-title">',"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?t+='   <div class="rs-photo-title active hidden"></div>':(t+='   <div class="rs-photo-title active">',t+=""!=jQuery.trim(myJSON.Album.Images[0].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?'<h1><a href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'">'+jQuery.trim(myJSON.Album.Images[0].photoname)+"</a></h1>":"<h1>"+jQuery.trim(myJSON.Album.Images[0].photoname)+"</h1>",t+="</div>"),recordNum>1&&("hide"==jQuery.trim(myJSON.Album.Images[1].photoname).toLowerCase()?t+='   <div class="rs-photo-title next hidden"></div>':(t+='   <div class="rs-photo-title next">',t+=""!=jQuery.trim(myJSON.Album.Images[1].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?'<h1><a href="'+jQuery.trim(myJSON.Album.Images[1].link)+'" target="'+myJSON.Album.Images[1].target+'">'+jQuery.trim(myJSON.Album.Images[1].photoname)+"</a></h1>":"<h1>"+jQuery.trim(myJSON.Album.Images[1].photoname)+"</h1>",t+="   </div>")),t+="</div>"),"yes"==config.captions&&(t+='<div class="rs-photo-gallery-caption">',"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?t+='   <div class="rs-photo-caption active hidden"></div>':(t+='   <div class="rs-photo-caption active">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[0].caption)+"</p>",t+="   </div>"),recordNum>1&&("hide"==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()?t+='   <div class="rs-photo-caption next hidden"></div>':(t+='   <div class="rs-photo-caption next">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[1].caption)+"</p>",t+="   </div>")),t+="</div>")),("yes"==config.titles||"yes"==config.captions)&&("yes"==config.descMoreLink&&(t+=""!=jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-desc-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.descMoreLinkText+"</span></a></div>":'<div class="rs-photo-gallery-desc-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.descMoreLinkText+"</span></a></div>"),t+="</div>"),recordNum>1&&("yes"==config.mainControls&&(t+='<div class="rs-photo-gallery-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>',t+='<div class="rs-photo-gallery-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),"yes"==config.playPause&&(t+='<div class="rs-photo-gallery-control play-pause playing" role="button" tabindex="0" aria-label="Pause Gallery"></div>')),"yes"==config.contMoreLink&&(t+=""!=jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.contMoreLinkText+"</span></a></div>":'<div class="rs-photo-gallery-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.contMoreLinkText+"</span></a></div>"),"yes"==config.galleryOverlay&&(t+=""!=jQuery.trim(myJSON.Album.Images[0].link)&&$.inArray("overlay",config.linkedElement)>-1||""!=jQuery.trim(myJSON.Album.Images[0].link)&&$.inArray("all",config.linkedElement)>-1?'<a class="rs-photo-gallery-overlay" href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'" tabindex="0" aria-label="Click to Read More About This Slide"></a>':'<a class="rs-photo-gallery-overlay" href="#" onclick="return false;" style="cursor: default;" tabindex="-1" aria-label="Click to Read More About This Slide"></a>'),t+="</div></div>",$(element).append(t),"slide"==config.transitionType&&sliderDimReset()}function loadInitImages(){loadImage(!0,0),"slide"==config.transitionType&&1==recordNum?(loadImage(!0,1),loadImage(!0,2)):recordNum>1&&loadImage(!0,1),"slide"==config.transitionType&&recordNum>=2&&loadImage(!0,2)}function loadImage(e,t){var l=1==e?$(".image.loading",element).eq(t):$(".image.loading.next-load",element),a=jQuery.trim($(".record-link",l).text()),o=jQuery.trim($(".record-link-target",l).text());"hide"==jQuery.trim($(".record-title",l).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",l).text())+'"';$('<img src="'+jQuery.trim($(".record-src",l).text())+'" alt="'+jQuery.trim($(".record-title",l).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",l).remove(),l.removeClass("loading hidden next-load").prepend($(this)),""!=a&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&l.children("img").wrapAll("<a href='"+a+"' target='"+o+"' tabindex='"+(l.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})}function loadImages(){$(".image.loading",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",e).text())+'"';$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden").prepend($(this)),""!=t&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function batchImageLoad(){$(".image.batch-item",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",e).text())+'"';$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden batch-item").prepend($(this)),""!=t&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function loadThumbs(){"yes"==config.thumbnails&&recordNum>1&&$(".thumbnail-image.loading",element).each(function(){var e=$(this),t="hide"==jQuery.trim($(".thumbnail-title",e).text()).toLowerCase()?"":'title="'+jQuery.trim($(".thumbnail-title",e).text())+'"';$('<img src="'+jQuery.trim($(".thumbnail-src",e).text())+'" '+t+' alt="'+jQuery.trim($(".thumbnail-title",e).text())+'" />').one("load",function(){if($(".thumbnail-src, .thumbnail-title",e).remove(),e.removeClass("loading hidden").prepend($(this)),config.onThumbnailLoad.call(this),!$(".thumbnail-image.loading",element).length)if(config.allThumbnailsLoaded.call(this),"vertical"==config.thumbnailSlideDirection){var t=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);$(".rs-photo-gallery-thumbnails-outer",element).css("width",t+"px"),$(".rs-photo-gallery-thumbnails",element).css("width",t+"px");var l=$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),a=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);if(a>l){var o=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,i=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:o+"px",bottom:i+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}}else if("horizontal"==config.thumbnailSlideDirection){var s=0;$(".rs-photo-gallery-thumbnail",element).each(function(){s+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).css("width",s+"px");var r=$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),t=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);if(t>r){var n=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,m=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:n+"px",right:m+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}var a=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);$(".rs-photo-gallery-thumbnails-outer",element).css("height",a+"px"),$(".rs-photo-gallery-thumbnails",element).css("height",a+"px");var g=a/2;$(".rs-photo-gallery-thumb-control",element).css("padding-top",g+"px")}})})}function textPerPhoto(e){var t="";return("yes"==config.showTextPerPhoto&&"yes"==config.titles||"yes"==config.showTextPerPhoto&&"yes"==config.captions)&&("hide"==jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()&&"hide"==jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()||"hide"==jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()&&""==jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()||("yes"==config.photoMoreLink&&""!=myJSON.Album.Images[e].link&&(t+='<div class="rs-photo-gallery-photo-more-link"><a href="'+myJSON.Album.Images[e].link+'" target="'+myJSON.Album.Images[e].target+'"><span>'+config.photoMoreLinkText+"</span></a></div>"),t+='<div class="rs-photo-gallery-photo-desc">',"yes"==config.titles&&"hide"!=jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()&&(t+='<div class="rs-photo-gallery-photo-title">',t+='<div class="rs-photo-title"><h1>'+myJSON.Album.Images[e].photoname+"</h1></div>",t+="</div>"),"yes"==config.captions&&"hide"!=jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()&&""!=jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()&&(t+='<div class="rs-photo-gallery-photo-caption">',t+='<div class="rs-photo-caption"><p>'+myJSON.Album.Images[e].caption+"</p></div>",t+="</div>"),t+="</div>")),t}function galleryEvents(){$(document).on("keydown",function(e){setTimeout(function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length?($(".rs-photo-gallery-container",element).addClass("cs-hover"),timerStop()):$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&($(".rs-photo-gallery-container",element).removeClass("cs-hover"),timerStop(),timerReset())},100)}),"yes"==config.mainControls&&($(".rs-photo-gallery-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-control",element).keydown(function(e){(e.keyCode==csKeyCodes.space||e.keyCode==csKeyCodes.enter)&&(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),$("#rs-photo-gallery-container-"+elemID).on("swiperight",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("prev"),timerReset())}),$("#rs-photo-gallery-container-"+elemID).on("swipeleft",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("next"),timerReset())}),"yes"==config.bulletControls&&($(".rs-photo-gallery-bullet-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-bullet-control",element).keydown(function(e){(e.keyCode==csKeyCodes.space||e.keyCode==csKeyCodes.enter)&&(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),"yes"==config.bullets&&($(".rs-photo-gallery-bullet",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var e=$(this).index();timerStop(),bulletGalleryAnimate(e),timerReset()}}),$(".rs-photo-gallery-bullet",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-bullet.last").focus():$(this).prev(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-bullet.first").focus():$(this).next(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(e.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var t=$(this).index();timerStop(),bulletGalleryAnimate(t),timerReset()}}})),"yes"==config.thumbnails&&($("#rs-photo-gallery-container-"+elemID).on("click keydown",".rs-photo-gallery-thumb-control",function(e){if(("click"==e.type||"keydown"==e.type&&e.keyCode==csKeyCodes.enter||"keydown"==e.type&&e.keyCode==csKeyCodes.space)&&(e.preventDefault(),!$(".rs-photo-gallery-thumbnails-outer",element).hasClass("animating")))if($(".rs-photo-gallery-thumbnails-outer",element).addClass("animating"),"horizontal"==config.thumbnailSlideDirection){var t=$(".thumbnail-image",element).outerWidth(!0),l=$(".thumbnail-image.first",element).outerWidth(!0),a=$(".thumbnail-image.last",element).outerWidth(!0),o=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("left")),i=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)-$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),s=i-o,r=0;$(this).hasClass("next")?(r=a>s?o+s:o+t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+r+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(r=l>o?0:o-t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+r+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}else if("vertical"==config.thumbnailSlideDirection){var t=$(".thumbnail-image",element).outerHeight(!0),l=$(".thumbnail-image.first",element).outerHeight(!0),a=$(".thumbnail-image.last",element).outerHeight(!0),o=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),i=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),s=i-o,r=0;$(this).hasClass("next")?(r=a>s?o+s:o+t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+r+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(r=l>o?0:o-t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+r+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}}),$(".rs-photo-gallery-thumbnail",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var e=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(e),timerReset()}}),$(".rs-photo-gallery-thumbnail",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus():$(this).prev(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus():$(this).next(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(e.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var t=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(t),timerReset()}}})),$(".rs-photo-gallery-container",element).hover(function(){$(this).addClass("cs-hover"),timerStop()},function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-container",element).on("touchend",function(e){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-control.play-pause",element).click(function(){$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery"),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery"),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset()))}),$(".rs-photo-gallery-control.play-pause",element).keydown(function(e){(e.keyCode==csKeyCodes.space||e.keyCode==csKeyCodes.enter)&&(e.preventDefault(),$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery"),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery"),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset())))}),"yes"!=config.fullScreenRotator&&$(element).parents(".region").children().on("click",function(){windowResize()})}function timerReset(){"yes"==config.playPause?$(".rs-photo-gallery-control.play-pause",element).hasClass("playing")&&!$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&"yes"==config.autoRotate&&galleryTimer():$(".rs-photo-gallery-container",element).hasClass("cs-hover")||"yes"==config.autoRotate&&galleryTimer()}function timerStop(){"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID])}function galleryRotate(){galleryAnimate($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).hasClass("last")?"first":"next")}function galleryAnimate(e){if($(".rs-photo-gallery-container",element).addClass("animating"),"next"==e){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"fade"==config.transitionType){var t=$(".rs-photo-gallery-images-list li.next",element).index();updateMoreLinks(t),updateOverlay(t),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}else if("slide"==config.transitionType){var t=$(".rs-photo-gallery-images-list li.next",element).attr("index");updateMoreLinks(t),updateOverlay(t);var l=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"));if("yes"==config.fullScreenRotator)var a=$(window).width();else var a=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var o=l+a,t=$(".rs-photo-gallery-images-list li.next",element).attr("index");$(".rs-photo-gallery-images-list",element).animate({left:"-"+o+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).eq(0)),$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),
config.onTransitionEnd.call(this)})}}else if("prev"==e){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&"fade"==config.transitionType&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).addClass("next-load"),loadImage())),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.next",element).removeClass("next"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.next",element).removeClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"slide"==config.transitionType&&($(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last()),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().addClass("next-load"),loadImage())),sliderDimReset()),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev").addClass("next"),"fade"==config.transitionType)var i=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var i=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[i].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[i].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[i].link)+"' target='"+myJSON.Album.Images[i].target+"'>"+jQuery.trim(myJSON.Album.Images[i].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[i].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[i].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[i].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[i].caption)+"</p>").removeClass("hidden").removeAttr("style")),"fade"==config.transitionType){var t=$(".rs-photo-gallery-images-list li.next",element).index();updateMoreLinks(t),updateOverlay(t),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}else if("slide"==config.transitionType){var t=$(".rs-photo-gallery-images-list li.active",element).prev(".image").attr("index");updateMoreLinks(t),updateOverlay(t);var l=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"));if("yes"==config.fullScreenRotator)var a=$(window).width();else var a=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var o=l-a,t=$(".rs-photo-gallery-images-list li."+e,element).index()-1;$(".rs-photo-gallery-images-list",element).animate({left:"-"+o+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}}else"first"==e&&(config.onTransitionStart.call(this),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(0),updateOverlay(0),"fade"==config.transitionType&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)}));("yes"==config.titles||"yes"==config.captions)&&fadeTitlesCaptions()}function bulletGalleryAnimate(e){if($(".rs-photo-gallery-container",element).addClass("animating"),"yes"==config.bulletControls&&(e-=1),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+e+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var t=$(".rs-photo-gallery-bullet.active",element).index();"yes"==config.bulletControls&&(t-=1);var l=0,a="";if(t>e){a="backward",l=t-e;for(var o=0;l>o;o++){var i=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(i)}sliderDimReset()}else if(e>t){a="forward",l=e-t,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(var o=0;l>o;o++){var i=$(".rs-photo-gallery-images-list li",element).eq(o).clone().removeClass("prev next active").addClass("clone");$(".rs-photo-gallery-images-list",element).append(i)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+l;else if("backward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-l;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(s).addClass("next")}if($(".rs-photo-gallery-bullet:eq("+e+")",element).addClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail:eq("+e+")",element).addClass("next"),"fade"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev"),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var n=$(window).width();else var n=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var m=$(".rs-photo-gallery-images-list li.next",element).index(),g=n*m;$(".rs-photo-gallery-images-list",element).animate({left:"-"+g+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==a){for(var t=0;l>t;t++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==a){for(var t=0;l>t;t++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+e+"']",element).first().addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}("yes"==config.titles||"yes"==config.captions)&&fadeTitlesCaptions()}function thumbnailGalleryAnimate(e){if($(".rs-photo-gallery-container",element).addClass("animating"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),"yes"==config.bullets&&$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+e+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var t=$(".rs-photo-gallery-thumbnail.active",element).index(),l=0,a="";if(t>e){a="backward",l=t-e;for(var o=0;l>o;o++){var i=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(i)}sliderDimReset()}else if(e>t){a="forward",l=e-t,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(var o=0;l>o;o++){var i=$(".rs-photo-gallery-images-list li",element).eq(o).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).append(i)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+l;else if("backward"==a)var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-l;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(s).addClass("next")}if("yes"==config.bullets&&$(".rs-photo-gallery-bullet:eq("+e+")",element).addClass("next"),$(".rs-photo-gallery-thumbnail:eq("+e+")",element).addClass("next"),"fade"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev"),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var n=$(window).width();else var n=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var m=$(".rs-photo-gallery-images-list li.next",element).index(),g=n*m;$(".rs-photo-gallery-images-list",element).animate({left:"-"+g+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==a){for(var t=0;l>t;t++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==a){for(var t=0;l>t;t++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+e+"']",element).first().addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}("yes"==config.titles||"yes"==config.captions)&&fadeTitlesCaptions()}function fadeTitlesCaptions(){if("fade"==config.transitionType){var e=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index()+1;e==recordNum&&(e=0)}else if("slide"==config.transitionType)var e=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).next(".image").attr("index");var t=1e3*config.transitionSpeed/2;"yes"==config.titles&&"no"==config.captions?$(".rs-photo-title.next",element).hasClass("hidden")&&(t=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-caption.next",element).hasClass("hidden")&&(t=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&(t=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})),"yes"==config.titles&&"no"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-title.next",element).hasClass("hidden")||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-caption.next",element).hasClass("hidden")||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})),"yes"==config.titles&&$(".rs-photo-title.active",element).fadeOut(t,function(){var l=$(this);if($(".rs-photo-title.next",element).hasClass("hidden")){var a=$(".rs-photo-title.next",element);setNextTitle(e,a,l)}else{var o=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(o=1e3*config.transitionSpeed/2),$(".rs-photo-title.next",element).delay(o).fadeIn(t,function(){var t=$(this);setNextTitle(e,t,l)})}}),"yes"==config.captions&&$(".rs-photo-caption.active",element).fadeOut(t,function(){var l=$(this);if($(".rs-photo-caption.next",element).hasClass("hidden")){var a=$(".rs-photo-caption.next",element);setNextCaption(e,a,l)}else{var o=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(o=1e3*config.transitionSpeed/2),$(".rs-photo-caption.next",element).delay(o).fadeIn(t,function(){var t=$(this);setNextCaption(e,t,l)})}})}function setNextTitle(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-title",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden").removeAttr("style"):""!=jQuery.trim(myJSON.Album.Images[e].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[e].link)+"' target='"+myJSON.Album.Images[e].target+"'>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</h1>").removeClass("hidden").removeAttr("style")}function setNextCaption(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-caption",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[e].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden").removeAttr("style"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[e].caption)+"</p>").removeClass("hidden").removeAttr("style")}function updateMoreLinks(e){if("yes"==config.contMoreLink)if($(".rs-photo-gallery-more-link a",element).attr("href",myJSON.Album.Images[e].link).attr("target",myJSON.Album.Images[e].target),$(".rs-photo-gallery-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)){var t=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){
$(this).removeClass("hidden")})}else $(".rs-photo-gallery-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")});if("yes"==config.descMoreLink)if($(".rs-photo-gallery-desc-more-link a",element).attr("href",myJSON.Album.Images[e].link).attr("target",myJSON.Album.Images[e].target),$(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)){var t=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-desc-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})}else $(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-desc-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")})}function updateOverlay(e){"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[e].link)&&$.inArray("overlay",config.linkedElement)>-1||""!=jQuery.trim(myJSON.Album.Images[e].link)&&$.inArray("all",config.linkedElement)>-1?$(".rs-photo-gallery-overlay",element).removeAttr("style").removeAttr("onclick").attr("href",jQuery.trim(myJSON.Album.Images[e].link)).attr("target",myJSON.Album.Images[e].target).attr("tabindex","0"):$(".rs-photo-gallery-overlay",element).css("cursor","default").attr("onclick","return false;").attr("href","#").attr("tabindex","-1"))}function galleryTimer(){var e=myJSON.Album.transitiondelay<=config.transitionSpeed?config.transitionSpeed+1:myJSON.Album.transitiondelay;galleryTimer[elemID]=setInterval(function(){galleryRotate()},1e3*e+1e3*config.transitionSpeed)}function buildStyleSheet(){var e=document.createElement("style");if(e){e.setAttribute("type","text/css");var t=document.getElementsByTagName("head")[0];t&&t.insertBefore(e,t.childNodes[0]);var l="",a="",o="",i="",s="";"fade"==config.transitionType?(o="width: 100%; height: 100%; position: static;",l="position: relative;",a="width: 100%; position: absolute; top: 0px; left: 0px; display: none;"):"slide"==config.transitionType&&(o="position: relative;",l="position: absolute; top: 0px; left: 0px;",a="float: left;",i="#rs-photo-gallery-container-"+elemID+".rs-photo-gallery-container { position: relative; }"),"yes"==config.fullScreenRotator&&(s="overflow: hidden;");var r="",n="",m="",g="",h="",p="",d="";"horizontal"==config.thumbnailSlideDirection?(r="bottom: 0px; left: 0px; right: 0px;",n="top: 0px; left: 0px; right: 0px;",m="margin-right: 10px; float: left;",g="top: 0px; bottom: 0px; left: 0px;",h="top: 0px; bottom: 0px; right: 0px;",p='content: "◀"; margin-top: -6.5px;',d='content: "▶"; margin-top: -6.5px;'):"vertical"==config.thumbnailSlideDirection&&(r="top: 0px; bottom: 0px; right: 0px;",n="left: 0px; top: 0px; bottom: 0px;",m="margin-bottom: 10px;",g="top: 0px; left: 0px; right: 0px;",h="bottom: 0px; left: 0px; right: 0px;",p='content: "▲";',d='content: "▼";');var c=".hidden {display: none;}"+i+"#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images {"+o+"}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list {"+l+"list-style: none;margin: 0px;padding: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li {"+a+s+"background: #000;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.active {display: block;z-index: 4;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.next {display: block;z-index: 3;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.prev {display: block;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li img {width: 100%;transform: rotate(.0001deg);}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails-outer {"+r+"position: absolute;background: #000;background: rgba(0, 0, 0, .75);z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails {"+n+"position: absolute;overflow: hidden;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list {list-style: none;margin: 0px;padding: 10px;position: absolute;top: 0px;left: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li {width: "+config.thumbnailWidth+"px;height: "+config.thumbnailHeight+"px;"+m+'cursor: pointer;overflow: hidden;opacity: .5;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter: alpha(opacity=50);-khtml-opacity: 0.5;-moz-opacity: 0.5;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-thumbnail-list li.active {opacity: 1;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter: alpha(opacity=100);-khtml-opacity: 1;-moz-opacity: 1;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-thumbnail-list li.last {margin: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li img {display: block;width: 100%;height: auto;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control {padding: 7px 10px;cursor: pointer;background: #000;background: rgba(0, 0, 0, .20);-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back {"+g+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back:before {"+p+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next {"+h+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next:before {"+d+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-desc {position: absolute;bottom: 0px;right: 0px;left: 0px;z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control-text {position: relative;display: block;width: 0px !important;height: 0px !important;overflow: hidden !important;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control.play-pause {width: 24px;height: 25px;position: absolute;bottom: 20px;left: 20px;z-index: 15;border-radius: 5px;background: #000;background: rgba(0, 0, 0, .80);}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.play-pause.playing:before {content: "";width: 0px;height: 15px;position: absolute;top: 5px;left: 7.5px;border-left: double 10px #FFF;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-control.play-pause.paused:before {content: "";width: 0px;height: 0px;border-style: solid;border-width: 7.5px 0 7.5px 10px;border-color: transparent transparent transparent #FFF;position: absolute;top: 5px;left: 8.5px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.back {width: 30px;height: 30px;position: absolute;top: 50%;left: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.back:before {content: "<";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.next {width: 30px;height: 30px;position: absolute;top: 50%;right: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.next:before {content: ">";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-bullets-outer {position: absolute;top: 0px;left: 0px;text-align: center;z-index: 10;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet {width: 12px;height: 12px;background: #FFF;border: solid 1px #666;display: inline-block;margin: 0px 5px;cursor: pointer;border-radius: 8px;-moz-background-clip: padding;-webkit-background-clip: padding;background-clip: padding-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet.active {background: #999;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet-control {width: 15px;height: 15px;display: inline-block;margin: 0px 10px;cursor: pointer;vertical-align: top;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-bullet-control.back:before {content: "<";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-bullet-control.next:before {content: ">";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+" .rs-photo-caption.active, .rs-photo-title.active {position: relative;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-caption.next, .rs-photo-title.next {display: none;position: relative;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .image.loading .loader {display: block;position: absolute;top: 50%;left: 50%;width: 150px;height: 150px;line-height: 150px;color: #ccc;font-size: 14px;margin: -75px 0px 0px -75px;box-sizing: border-box;text-align: center;z-index: 5;text-transform: uppercase;}#rs-photo-gallery-container-"+elemID+' .loader:before, .loader:after {opacity: 0;box-sizing: border-box;content: "\\0020";position: absolute;top: 0;left: 0;width: 100%;height: 100%;border-radius: 100px;border: 5px solid #fff;box-shadow: 0 0 50px #fff, inset 0 0 50px #fff;}#rs-photo-gallery-container-'+elemID+" .loader:after {z-index: 1;-webkit-animation: gogoloader 2s infinite 1s;}#rs-photo-gallery-container-"+elemID+" .loader:before {z-index: 2;-webkit-animation: gogoloader 2s infinite;}@-webkit-keyframes gogoloader {0% {-webkit-transform: scale(0);opacity: 0;}50% {opacity: 1;}100% {-webkit-transform: scale(1);opacity: 0;}}",y=document.createTextNode(c);e.styleSheet?e.styleSheet.cssText=c:e.appendChild(y)}}function sliderDimReset(){var e=getBreakPoint();if("yes"==config.fullScreenRotator&&config.fullScreenBreakpoints.indexOf(e)>-1){var t=$(element).offset().top,l=$(window).width(),a=$(window).height()-t,o=$(".rs-photo-gallery-images-list li",element).length,i=l*o,s=l,r=0,n=config.imageWidth,m=config.imageHeight,g=m/n,r=s*g;a>r&&(r=a,s=r/g);var h=(s-l)/2,p=(r-a)/2,d=$(".rs-photo-gallery-images-list li.active",element).index();l=parseInt(l);var c=d*l;$(".rs-photo-gallery-container",element).css({height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:i+"px",height:a+"px",left:"-"+c+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:l+"px",height:a+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:s+"px",height:r+"px",margin:"-"+p+"px 0px 0px -"+h+"px"})}else{var y=$(element).width()>config.imageWidth?config.imageWidth:$(element).width(),u=config.imageHeight/config.imageWidth,v=y*u,o=$(".rs-photo-gallery-images-list li",element).length,i=y*o,d=$(".rs-photo-gallery-images-list li.active",element).index();y=parseInt(y);var c=d*y;$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:v+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:i+"px",height:v+"px",left:"-"+c+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:y+"px",height:v+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}function windowResize(){if(recordNum>1&&timerStop(),"fade"==config.transitionType){var e=getBreakPoint();if("yes"==config.fullScreenRotator&&config.fullScreenBreakpoints.indexOf(e)>-1){var t=$(element).offset().top,l=$(window).width(),a=$(window).height()-t,o=a/l,i=l*o,s=l,r=0,n=config.imageWidth,m=config.imageHeight,g=m/n,r=s*g;a>r&&(r=a,s=r/g);var h=(s-l)/2,p=(r-a)/2;$(".rs-photo-gallery-container",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:s+"px",height:r+"px",margin:"-"+p+"px 0px 0px -"+h+"px"})}else{var s=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).width(),n=config.imageWidth,m=config.imageHeight,g=m/n,r=s*g;$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",r+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",r+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",r+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}if("slide"==config.transitionType&&sliderDimReset(),recordNum>1&&timerReset(),"yes"==config.thumbnails)if("vertical"==config.thumbnailSlideDirection){var d=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),c=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0);d>c&&$(".rs-photo-gallery-thumbnail-list",element).css("top","-"+c+"px");var y=$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),u=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);if(u>y){var v=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,f=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:v+"px",bottom:f+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}else $(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:"0px",bottom:"0px"}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style")}else if("horizontal"==config.thumbnailSlideDirection){var b=$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),x=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);if(x>b){var C=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,I=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:C+"px",right:I+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}else{var k=0;$(".rs-photo-gallery-thumbnail",element).each(function(){k+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style").css("width",k+"px"),$(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:"0px",right:"0px"})}}}function getBreakPoint(){return $(window).width()>=1024?"960":$(window).width()>=768&&$(window).width()<1024?"768":$(window).width()>=640&&$(window).width()<768?"640":$(window).width()>=480&&$(window).width()<640?"480":$(window).width()>=320&&$(window).width()<480?"320":void 0}var element=this,moduleID=$(element).parent().parent().attr("id").replace("pmi-",""),myJSON=eval("photoGallery"+moduleID),recordNum=myJSON.Album.Images.length,elemID=moduleID,csKeyCodes={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};$(window).bind("resize",windowResize),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,l=Number(arguments[1])||0;for(l=0>l?Math.ceil(l):Math.floor(l),0>l&&(l+=t);t>l;l++)if(l in this&&this[l]===e)return l;return-1});var getWidth=$(window).width();"yes"==config.appHeader&&$(element).prepend('<div class="ui-widget-header"><h1>'+myJSON.Album.title+"</h1></div>"),recordNum>0&&(buildStyleSheet(),gatherMedia(),"yes"==config.efficientLoad?loadInitImages():loadImages(),loadThumbs(),recordNum>1&&(galleryEvents(),"yes"==config.autoRotate&&galleryTimer()),windowResize()),config.allLoaded.call(this)})}}(jQuery),function(e,t,l){"function"==typeof define&&define.amd?define(["jquery"],function(a){return l(a,e,t),a.mobile}):l(e.jQuery,e,t)}(this,document,function(e,t,l,a){!function(e,t,l,a){function o(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function i(t,l){var i,s,r,n,m,g,h,p,d,c=t.type;if(t=e.Event(t),t.type=l,i=t.originalEvent,s=e.event.props,c.search(/^(mouse|click)/)>-1&&(s=J),i)for(h=s.length,n;h;)n=s[--h],t[n]=i[n];if(c.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==c.search(/^touch/)&&(r=o(i),c=r.touches,m=r.changedTouches,g=c&&c.length?c[0]:m&&m.length?m[0]:a,g))for(p=0,d=N.length;d>p;p++)n=N[p],t[n]=g[n];return t}function s(t){for(var l,a,o={};t;){l=e.data(t,w);for(a in l)l[a]&&(o[a]=o.hasVirtualBinding=!0);t=t.parentNode}return o}function r(t,l){for(var a;t;){if(a=e.data(t,w),a&&(!l||a[l]))return t;t=t.parentNode}return null}function n(){z=!1}function m(){z=!0}function g(){F=0,R.length=0,E=!1,m()}function h(){n()}function p(){d(),T=setTimeout(function(){T=0,g()},e.vmouse.resetTimerDuration)}function d(){T&&(clearTimeout(T),T=0)}function c(t,l,a){var o;return(a&&a[t]||!a&&r(l.target,t))&&(o=i(l,t),e(l.target).trigger(o)),o}function y(t){var l,a=e.data(t.target,S);!E&&(!F||F!==a)&&(l=c("v"+t.type,t),l&&(l.isDefaultPrevented()&&t.preventDefault(),l.isPropagationStopped()&&t.stopPropagation(),l.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function u(t){var l,a,i,r=o(t).touches;r&&1===r.length&&(l=t.target,a=s(l),a.hasVirtualBinding&&(F=W++,e.data(l,S,F),d(),h(),Q=!1,i=o(t).touches[0],L=i.pageX,j=i.pageY,c("vmouseover",t,a),c("vmousedown",t,a)))}function v(e){z||(Q||c("vmousecancel",e,s(e.target)),Q=!0,p())}function f(t){if(!z){var l=o(t).touches[0],a=Q,i=e.vmouse.moveDistanceThreshold,r=s(t.target);Q=Q||Math.abs(l.pageX-L)>i||Math.abs(l.pageY-j)>i,Q&&!a&&c("vmousecancel",t,r),c("vmousemove",t,r),p()}}function b(e){if(!z){m();var t,l,a=s(e.target);c("vmouseup",e,a),Q||(t=c("vclick",e,a),t&&t.isDefaultPrevented()&&(l=o(e).changedTouches[0],R.push({touchID:F,x:l.clientX,y:l.clientY}),E=!0)),c("vmouseout",e,a),Q=!1,p()}}function $(t){var l,a=e.data(t,w);if(a)for(l in a)if(a[l])return!0;return!1}function x(){}function C(t){var l=t.substr(1);return{setup:function(){$(this)||e.data(this,w,{});var a=e.data(this,w);a[t]=!0,D[t]=(D[t]||0)+1,1===D[t]&&P.bind(l,y),e(this).bind(l,x),M&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&P.bind("touchstart",u).bind("touchend",b).bind("touchmove",f).bind("scroll",v))},teardown:function(){--D[t],D[t]||P.unbind(l,y),M&&(--D.touchstart,D.touchstart||P.unbind("touchstart",u).unbind("touchmove",f).unbind("touchend",b).unbind("scroll",v));var a=e(this),o=e.data(this,w);o&&(o[t]=!1),a.unbind(l,x),$(this)||a.removeData(w)}}}var I,k,w="virtualMouseBindings",S="virtualTouchID",A="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),N="clientX clientY pageX pageY screenX screenY".split(" "),O=e.event.mouseHooks?e.event.mouseHooks.props:[],J=e.event.props.concat(O),D={},T=0,L=0,j=0,Q=!1,R=[],E=!1,z=!1,M="addEventListener"in l,P=e(l),W=1,F=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},k=0;k<A.length;k++)e.event.special[A[k]]=C(A[k]);M&&l.addEventListener("click",function(t){var l,a,o,i,s,r,n=R.length,m=t.target;if(n)for(l=t.clientX,a=t.clientY,I=e.vmouse.clickDistanceThreshold,o=m;o;){for(i=0;n>i;i++)if(s=R[i],r=0,o===m&&Math.abs(s.x-l)<I&&Math.abs(s.y-a)<I||e.data(o,S)===s.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}},!0)}(e,t,l),function(e){e.mobile={}}(e),function(e,t){var a={touch:"ontouchend"in l};e.mobile.support=e.mobile.support||{},e.extend(e.support,a),e.extend(e.mobile.support,a)}(e),function(e,t,a){function o(t,l,o,i){var s=o.type;o.type=l,i?e.event.trigger(o,a,t):e.event.dispatch.call(t,o),o.type=s}var i=e(l),s=e.mobile.support.touch,r="touchmove scroll",n=s?"touchstart":"mousedown",m=s?"touchend":"mouseup",g=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,l){e.fn[l]=function(e){return e?this.bind(l,e):this.trigger(l)},e.attrFn&&(e.attrFn[l]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){l=t,o(i,l?"scrollstart":"scrollstop",e)}var l,a,i=this,s=e(i);s.bind(r,function(o){e.event.special.scrollstart.enabled&&(l||t(o,!0),clearTimeout(a),a=setTimeout(function(){t(o,!1)},50))})},teardown:function(){e(this).unbind(r)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,l=e(t),a=!1;l.bind("vmousedown",function(s){function r(){clearTimeout(g)}function n(){r(),l.unbind("vclick",m).unbind("vmouseup",r),i.unbind("vmousecancel",n)}function m(e){n(),a||h!==e.target?a&&e.preventDefault():o(t,"tap",e)}if(a=!1,s.which&&1!==s.which)return!1;var g,h=s.target;l.bind("vmouseup",r).bind("vclick",m),i.bind("vmousecancel",n),g=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(a=!0),o(t,"taphold",e.Event("taphold",{target:h}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var l=t.pageXOffset,a=t.pageYOffset,o=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(o)>Math.floor(e.pageX)?(o-=l,i-=a):(i<e.pageY-a||o<e.pageX-l)&&(o=e.pageX-l,i=e.pageY-a),{x:o,y:i}},start:function(t){var l=t.originalEvent.touches?t.originalEvent.touches[0]:t,a=e.event.special.swipe.getLocation(l);return{time:(new Date).getTime(),coords:[a.x,a.y],origin:e(t.target)}},stop:function(t){var l=t.originalEvent.touches?t.originalEvent.touches[0]:t,a=e.event.special.swipe.getLocation(l);return{time:(new Date).getTime(),coords:[a.x,a.y]}},handleSwipe:function(t,l,a,i){if(l.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-l.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-l.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>l.coords[0]?"swipeleft":"swiperight";return o(a,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:l}),!0),o(a,s,e.Event(s,{target:i,swipestart:t,swipestop:l}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,l=this,a=e(l),o={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=o,o.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var a,s=e.event.special.swipe.start(t),r=t.target,n=!1;o.move=function(t){s&&!t.isDefaultPrevented()&&(a=e.event.special.swipe.stop(t),n||(n=e.event.special.swipe.handleSwipe(s,a,l,r),n&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(s.coords[0]-a.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},o.stop=function(){n=!0,e.event.special.swipe.eventInProgress=!1,i.off(g,o.move),o.move=null},i.on(g,o.move).one(m,o.stop)}},a.on(n,o.start)},teardown:function(){var t,l;t=e.data(this,"mobile-events"),t&&(l=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),l&&(l.start&&e(this).off(n,l.start),l.move&&i.off(g,l.move),l.stop&&i.off(m,l.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,l){e.event.special[t]={setup:function(){e(this).bind(l,e.noop)},teardown:function(){e(this).unbind(l)}}})}(e,this)});